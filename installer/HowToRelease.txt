How to create a Windows Release
===============================

A setup executable is named as follows

 - it starts with Git;
 - followed by the official git version if the release is closely
   related to a specific version of official git;
 - followed by
    * preview<date>, for snapshot builds.
    * winrc#, if we reach a certain quality level and plan to release
      a stable version.  If no bugs are found, this can be upgraded
      to a stable release.  We use winrc instead of simply rc to avoid
      confusion with official release candidates.  The prefix "win"
      clearly indicates that the tag is about the Windows release.

Examples:

Git-preview20080313.exe
Git-1.5.4-preview20071014.exe
Git-1.5.4-winrc3.exe
Git-1.5.4.exe

We'll not necessary release a stable version for each official
version. If we merge changes from git.git we will adjust the number.
We will continue releasing previews until we have reached sufficient
stability.

The following is missing before we release a stable installer.

    * features equivalent to official git-#-#-# available in Git Bash.
    * good support for case insensitive filesystems.

We will *not* wait for

    * server functionality (git-daemon, git-shell, ...).

A Git for Windows release is tagged by a tag having a postfix '.windows.[0-9]+'.

Here is a step-by-step instruction for the maintainer:

   cd /usr/src/build-extra
   git fetch
   git checkout master
   cd /usr/src/git
   git remote add git https://github.com/git/git
   git fetch git
   git checkout master
   BASE="$(git rev-parse ":/Start the merging-rebase")"
   ../build-extra/./shears.sh --merging --onto <git-tag> $BASE
   git diff <gittag>..origin/master > prev.diff
   git diff <gittag>..master > curr.diff
   git diff --no-index prev.diff curr.diff
   # check diff of diff
   make clean
   make install install-html
   cd t
   /usr/bin/time prove -j 5 --state=failed,save ./t[0-9]*.sh
   git tag -a <git-tag>.windows.<number>

   # Make installer

   cd /usr/src/build-extra/installer
   ./release.sh <git-tag>-<preview><date>

   # Test installer.

   # Upload to GitHub (verify sha1).

   cd /usr/src/git
   git push master
   git push <git-tag>.windows.<number>
   cd /usr/src/build-extra/installer
   git push Git-<git-tag>-<preview><date>
   # Don't forget to push tags.

   # Reply to Junio's announcement.
   # Start the subject of your email with '[ANNOUNCE]'.
